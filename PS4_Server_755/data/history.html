<html>
<head>
<title>History Blocker</title>
</head>
<body onload="go()">
<script>
function print(){}
let textNode = document.createTextNode("Loading: History Blocker...");
let node = document.createElement("p").appendChild(textNode);
document.body.appendChild(node);
document.body.appendChild(document.createElement("br"));

var scriptCode = '';

function preloadScripts(lst) {
  for (var i = 0; i < lst.length; i++) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', lst[i], false);
    xhr.send('');
    scriptCode += xhr.responseText + '\n';
  }
}

function done() {
  if (main_ret == 0 || main_ret == 179) {
    alert('You\'re all set!');
    read_ptr_at(0);
  }  else {
    alert('Jailbreak failed! Reboot your PS4 and try again.');
  }
}

window.midExploit = function() {
  var scripts = ['./blob.js', './jb.js'];
  scripts.push('./loader.js');
  scripts.push('./history.js');
  scripts.push('./netcat.js');
  preloadScripts(scripts, go);
}

window.postExploit = function() {
  setTimeout(function() {
    eval.call(window, scriptCode);
    done();
  }, 100);
};
</script>
<script src="./utils.js"></script>
<script src="./int64.js"></script>
<script src="./ps4.js"></script>
<button id="input1" onfocus="handle2()"></button>
<button id="input2"></button>
<button id="input3" onfocus="handle2()"></button>
<select id="select1">
<option value="value1">Value1</option>
</select>
</body>
</html>
